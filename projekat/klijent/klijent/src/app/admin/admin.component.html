<div class="container">
    <mat-toolbar color="primary">
        <button mat-button [matMenuTriggerFor]="menu">Menu</button>
        <mat-menu #menu="matMenu">
            <button mat-menu-item (click)="tabelaK()">Tabela korisnika</button>
            <button mat-menu-item (click)="regPolj()">Registruj poljoprivrednika</button>
            <button mat-menu-item (click)="regPred()">Registruj preduzece</button>
            <button mat-menu-item (click)="listaSvih()">Ažuriranje korisnika</button>
            <button mat-menu-item (click)="promenaLozinke()">Promena lozinke</button>
        </mat-menu>
        <span class="desno">
            <button mat-button (click)="odjava()">Odjavi se</button>
        </span>
    </mat-toolbar>
    <div class="prikaz">
        <table mat-table [dataSource]="korisnici" #tabela *ngIf="prikaz==1" class="mat-elevation-z8 tabela">
            <ng-container matColumnDef="rednibr">
                <th mat-header-cell *matHeaderCellDef> Redni broj </th>
                <td mat-cell *matCellDef="let element"> {{element.IdK}} </td>
            </ng-container>
            <ng-container matColumnDef="username">
                <th mat-header-cell *matHeaderCellDef> Username </th>
                <td mat-cell *matCellDef="let element"> {{element.Username}} </td>
            </ng-container>
            <ng-container matColumnDef="password">
                <th mat-header-cell *matHeaderCellDef> Password </th>
                <td mat-cell *matCellDef="let element"> {{element.Password}} </td>
            </ng-container>
            <ng-container matColumnDef="obrisi">
                <th mat-header-cell *matHeaderCellDef style="text-align: center;"> Obriši </th>
                <td mat-cell *matCellDef="let element" style="text-align: center;"> <button mat-flat-button color="warn"
                        (click)="obrisi(element.Username)">Obriši</button> </td>
            </ng-container>
            <ng-container matColumnDef="potvrdi">
                <th mat-header-cell *matHeaderCellDef style="text-align: center;"> Potvrdi </th>
                <td mat-cell *matCellDef="let element" style="text-align: center;"> <button mat-flat-button
                        color="primary" (click)="potvrdi(element.Username)">Potvrdi</button> </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="kolone"></tr>
            <tr mat-row *matRowDef="let row; columns: kolone;"></tr>
        </table>
        <div *ngIf="prikaz==2">
            <h1>Registracija poljoprivrednika</h1>
            <form>
                <table class="tabcent">
                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>Ime</mat-label>
                                <input matInput name="ime" [(ngModel)]="ime">
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>Prezime</mat-label>
                                <input matInput name="prezime" [(ngModel)]="prezime">
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>Korisničko ime</mat-label>
                                <input matInput name="korIme" [(ngModel)]="korIme">
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>Lozinka</mat-label>
                                <input matInput type="password" name="lozinka1" [(ngModel)]="lozinka1">
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>Datum rođenja</mat-label>
                                <input matInput [matDatepicker]="picker" name="rodjendan" [(ngModel)]="rodjendan">
                                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                <mat-datepicker #picker></mat-datepicker>
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>Mesto rođenja</mat-label>
                                <input matInput name="mesto1" [(ngModel)]="mesto1">
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>Kontakt telefon</mat-label>
                                <input matInput name="telefon" [(ngModel)]="telefon">
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>Email</mat-label>
                                <input matInput name="email1" [(ngModel)]="email1">
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <button mat-flat-button color="accent" (click)="prijavaPolj()">Potvrdi</button>
                        </td>
                    </tr>
                </table>
            </form>
        </div>
        <div *ngIf="prikaz==3">
            <h1>Registracija preduzeća</h1>
            <form>
                <table class="tabcent">
                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>Pun naziv preduzeća</mat-label>
                                <input matInput name="imePred" [(ngModel)]="imePred">
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>Skraćeni naziv preduzeća</mat-label>
                                <input matInput name="skr" [(ngModel)]="skr">
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>Lozinka</mat-label>
                                <input matInput type="password" name="lozinka2" [(ngModel)]="lozinka2">
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>Datum osnivanja preduzeća</mat-label>
                                <input matInput name="datumOsn" [matDatepicker]="picker" [(ngModel)]="datumOsn">
                                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                <mat-datepicker #picker></mat-datepicker>
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>Mesto preduzeća</mat-label>
                                <input matInput name="mesto2" [(ngModel)]="mesto2">
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>Email</mat-label>
                                <input matInput name="email2" [(ngModel)]="email2">
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <button mat-flat-button color="accent" (click)="prijavaPred()">Potvrdi</button>
                        </td>
                    </tr>
                </table>
            </form>
        </div>
        <div *ngIf="prikaz==4" style="width: 60%;">
            <mat-accordion>
                <mat-expansion-panel *ngFor="let kor of fullKorisnici;">
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            {{kor.Username}}
                        </mat-panel-title>
                        <mat-panel-description>
                            Prikaži više
                        </mat-panel-description>
                    </mat-expansion-panel-header>
                    <span>
                        <span><b>Tip korisnika:&nbsp;</b>{{kor.Tip}}</span>
                        <br>
                        <span *ngIf="kor.Tip=='Poljoprivrednik'">
                            <b>Ime:&nbsp;</b>{{kor.Ime}}
                            <br>
                            <b>Prezime:&nbsp;</b>{{kor.Prezime}}
                            <br>
                        </span>
                        <span *ngIf="kor.Tip=='Preduzece'">
                            <b>Ime preduzeća:</b>{{kor.ImePred}}
                            <br>
                        </span>
                        <span><b>Korisničko ime:&nbsp;</b>{{kor.Username}}</span>
                        <br>
                        <span><b>Lozinka:&nbsp;</b>{{kor.Password}}</span>
                        <br>
                        <span *ngIf="kor.Tip!='Admin'"><b>Datum&nbsp;<span
                                    *ngIf="kor.Tip=='Poljoprivrednik'">rođenja</span><span
                                    *ngIf="kor.Tip=='Preduzece'">osnivanja</span>:&nbsp;</b>{{kor.Datum}}<br></span>
                        <span *ngIf="kor.Tip!='Admin'">
                            <b>Mesto:&nbsp;</b>{{kor.Mesto}}
                            <br>
                        </span>
                        <span *ngIf="kor.Tip=='Poljoprivrednik'">
                            <b>Telefon:&nbsp;</b>{{kor.Telefon}}
                            <br>
                        </span>
                        <span><b>Email:&nbsp;</b>{{kor.Email}}</span>
                        <br>
                        <button mat-flat-button color="accent" (click)="openDialog(kor)">Ažuriraj</button>
                        <button mat-flat-button color="warn" (click)="obrisiSkroz(kor.Username)"
                            style="margin-left: 10px;">Obriši</button>
                    </span>
                    <span *ngIf="prikaz1==1 && kor.Tip=='Poljoprivrednik'">
                        <form>
                            <table>
                                <tr>
                                    <td>
                                        <mat-form-field>
                                            <mat-label>Ime</mat-label>
                                            <input matInput name="ai" [(ngModel)]="azrime">
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field>
                                            <mat-label>Prezime</mat-label>
                                            <input matInput name="ap" [(ngModel)]="azrprezime">
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field>
                                            <mat-label>Korisničko ime</mat-label>
                                            <input matInput name="ak" [(ngModel)]="azrkorIme">
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field>
                                            <mat-label>Lozinka</mat-label>
                                            <input matInput type="password" name="al" [(ngModel)]="azrlozinka1">
                                        </mat-form-field>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <mat-form-field>
                                            <mat-label>Datum rođenja</mat-label>
                                            <input matInput [matDatepicker]="picker" name="ar"
                                                [(ngModel)]="azrrodjendan">
                                            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                            <mat-datepicker #picker></mat-datepicker>
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field>
                                            <mat-label>Mesto rođenja</mat-label>
                                            <input matInput name="am" [(ngModel)]="azrmesto1">
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field>
                                            <mat-label>Kontakt telefon</mat-label>
                                            <input matInput name="at" [(ngModel)]="azrtelefon">
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field>
                                            <mat-label>Email</mat-label>
                                            <input matInput name="ae" [(ngModel)]="azremail1">
                                        </mat-form-field>
                                    </td>
                                </tr>
                            </table>
                        </form>
                    </span>
                    <span *ngIf="prikaz1==1 && kor.Tip=='Preduzece'">
                        <form>
                            <table>
                                <tr>
                                    <td>
                                        <mat-form-field>
                                            <mat-label>Pun naziv preduzeća</mat-label>
                                            <input matInput name="aip" [(ngModel)]="azrimePred">
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field>
                                            <mat-label>Skraćeni naziv preduzeća</mat-label>
                                            <input matInput name="askr" [(ngModel)]="azrskr">
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field>
                                            <mat-label>Lozinka</mat-label>
                                            <input matInput type="password" name="al2" [(ngModel)]="lozinka2">
                                        </mat-form-field>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <mat-form-field>
                                            <mat-label>Datum osnivanja preduzeća</mat-label>
                                            <input matInput name="azrdatumOsn" [matDatepicker]="picker"
                                                [(ngModel)]="azrdatumOsn">
                                            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                            <mat-datepicker #picker></mat-datepicker>
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field>
                                            <mat-label>Mesto preduzeća</mat-label>
                                            <input matInput name="azrmesto2" [(ngModel)]="azrmesto2">
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field>
                                            <mat-label>Email</mat-label>
                                            <input matInput name="azremail2" [(ngModel)]="azremail2">
                                        </mat-form-field>
                                    </td>
                                </tr>
                            </table>
                        </form>
                    </span>
                    <span *ngIf="prikaz1==1 && kor.Tip=='Admin'">
                        <form>
                            <table>
                                <tr>
                                    <td>
                                        <mat-form-field>
                                            <mat-label>Korisničko ime</mat-label>
                                            <input matInput name="adkor" [(ngModel)]="azrusername">
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field>
                                            <mat-label>Lozinka</mat-label>
                                            <input matInput type="password" name="al3" [(ngModel)]="azrlozinka3">
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field>
                                            <mat-label>Email</mat-label>
                                            <input matInput name="azremail3" [(ngModel)]="azremail3">
                                        </mat-form-field>
                                    </td>
                                </tr>
                            </table>
                        </form>
                    </span>
                    <span *ngIf="prikaz1==1">
                        <button mat-flat-button color="accent" (click)="potvrda(kor)">Potvrdi</button>
                    </span>
                </mat-expansion-panel>
            </mat-accordion>
        </div>
        <div *ngIf="prikaz==5" style="text-align: center;">
            <h1>Promena lozinke</h1>
            <form #myForm="ngForm">
                <table align="center">
                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>Stara lozinka</mat-label>
                                <input matInput name="strloz" [(ngModel)]="strloz">
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>Nova lozinka</mat-label>
                                <input matInput name="novloz" [(ngModel)]="novloz">
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>Ponoviti novu lozinku</mat-label>
                                <input matInput name="novloz2" [(ngModel)]="novloz2">
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <button mat-flat-button color="accent" (click)="promLoz();myForm.reset()">Promeni
                                lozinku</button>
                        </td>
                    </tr>
                </table>
            </form>
        </div>
    </div>
    <footer>
        Copyright &copy; 2020
    </footer>
</div>